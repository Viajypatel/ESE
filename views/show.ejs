<% include ./partials/header.ejs %>

    <h2 class="text-2xl font-bold mb-6">Posts by: <%= user.fullname %>
    </h2>
    <div class="grid">
        <% user.posts.forEach(function(elem){ %>
            <div class="card rounded-lg overflow-hidden shadow-lg">
                <div class="h-40 overflow-hidden">
                    <img src="/images/uploads/<%= elem.image %>" class="w-full h-full object-cover" alt="imgg">
                </div>
                <div class="p-4">
                    <h3 class="text-lg font-semibold mb-2">
                        <%= elem.title %>
                    </h3>
                    <p class="text-sm mb-2">Posted by: <%= user.username %>
                    </p>
                    <p class="text-lg font-semibold text-green-400 mb-2">â‚¹<%= elem.price %>
                    </p>
                    <!-- Delete button/link -->
                    <form action="/posts/delete/<%= elem.id %>" method="POST"
                        onsubmit="return confirm('Are you sure you want to delete this post?');">
                        <button type="submit"
                            class="px-4 py-2 bg-red-600 text-white rounded hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500">
                            Delete
                        </button>
                    </form>
                </div>
            </div>
            <% }) %>


    </div>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const cartCounter = document.getElementById("cartCounter");

            // Load saved items from local storage
            const savedItems = JSON.parse(localStorage.getItem("cart")) || [];

            // Function to update the cart counter
            function updateCartCounter() {
                cartCounter.textContent = `(${savedItems.length})`; // Update cart counter
                cartCounter.classList.remove("hidden"); // Make cart counter visible
            }

            // Initial cart counter update
            updateCartCounter();
        });

    </script>
    <% include ./partials/footer.ejs %>